# encoding: utf-8
#

import os
import shutil

for file in ("utils.lua", "bitset.lua"):
    src_path = os.path.join("big/", file)
    dst_path = os.path.join(vardir, file)
    shutil.copy(src_path, dst_path)
    admin("dofile('%s')" % (file)) 
    os.unlink(dst_path);

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: insert/delete
#-----------------------------------------------------------------------------#
""";

admin("test_insert_delete(128)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: ALL
#-----------------------------------------------------------------------------#
""";

admin("clear()")
admin("fill(1, 128)")
admin("dump(box.index.BITS_ALL)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_SET (single bit)
#-----------------------------------------------------------------------------#
""";

admin("dump(box.index.BITS_ALL_SET, 0)")

admin("dump(box.index.BITS_ALL_SET, 1)")
admin("dump(box.index.BITS_ALL_SET, 2)")
admin("dump(box.index.BITS_ALL_SET, 8)")
admin("dump(box.index.BITS_ALL_SET, 1073741824)")
admin("dump(box.index.BITS_ALL_SET, 2147483648)")
admin("dump(box.index.BITS_ALL_SET, 4294967296)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_SET (multiple bit)
#-----------------------------------------------------------------------------#
""";

admin("dump(box.index.BITS_ALL_SET, 3)")
admin("dump(box.index.BITS_ALL_SET, 7)")
admin("dump(box.index.BITS_ALL_SET, 31)")
admin("dump(box.index.BITS_ALL_SET, 5)")
admin("dump(box.index.BITS_ALL_SET, 10)")
admin("dump(box.index.BITS_ALL_SET, 27)")
admin("dump(box.index.BITS_ALL_SET, 341)")
admin("dump(box.index.BITS_ALL_SET, 2147483649)")
admin("dump(box.index.BITS_ALL_SET, 4294967295)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_NOT_SET (single bit)
#-----------------------------------------------------------------------------#
""";

admin("dump(box.index.BITS_ALL_NOT_SET, 0)")

admin("dump(box.index.BITS_ALL_NOT_SET, 2)")
admin("dump(box.index.BITS_ALL_NOT_SET, 8)")
admin("dump(box.index.BITS_ALL_NOT_SET, 4294967296)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_NOT_SET (multiple bit)
#-----------------------------------------------------------------------------#
""";

admin("dump(box.index.BITS_ALL_NOT_SET, 3)")
admin("dump(box.index.BITS_ALL_NOT_SET, 7)")
admin("dump(box.index.BITS_ALL_NOT_SET, 10)")
admin("dump(box.index.BITS_ALL_NOT_SET, 27)")
admin("dump(box.index.BITS_ALL_NOT_SET, 85)")
admin("dump(box.index.BITS_ALL_NOT_SET, 4294967295)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ANY_SET (single bit)
#-----------------------------------------------------------------------------#
""";

admin("dump(box.index.BITS_ANY_SET, 0)")

admin("dump(box.index.BITS_ANY_SET, 16)")
admin("dump(box.index.BITS_ANY_SET, 128)")
admin("dump(box.index.BITS_ANY_SET, 4294967296)")

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ANY_SET (multiple bit)
#-----------------------------------------------------------------------------#
""";

admin("dump(box.index.BITS_ANY_SET, 7)")
admin("dump(box.index.BITS_ANY_SET, 84)")
admin("dump(box.index.BITS_ANY_SET, 113)")
