# encoding: tarantool
#

exec admin "lua type(box.xml)"
exec admin "lua xml = box.xml.load(\"<?xml version='1.0' encoding='utf-8'?><User>123<List><A>1</A><A id='abc'>2</A></List></User>\")"
exec admin "lua type(xml)"
exec admin "lua tostring(xml)"
exec admin "lua xml:xpath('//User/List')"
exec admin "lua xml:xpath('//User/List'):xpath('//A')"
exec admin "lua xml:xpath('//User/List'):xpath('A')"
exec admin "lua xml:xpath('User/List')"
exec admin "lua xml:xpath(\"//User/List/A[@id='abc']\")"

exec admin "lua elm = box.xml.element('Test')"
exec admin "lua elm"
exec admin "lua elm:attribute('abc')"
exec admin "lua elm:attribute('abc', 'cde')"
exec admin "lua elm"
exec admin "lua elm:attribute('abc', 'cde1')"
exec admin "lua elm"
exec admin "lua elm:attribute('abc1', 'a&b')"
exec admin "lua elm"
exec admin "lua elm:attribute('abc1', nil)"
exec admin "lua elm"
exec admin "lua elm:attribute('abc1', nil)"
exec admin "lua elm"
exec admin "lua xml:xpath(\"//User/List/A[@id='abc']\"):parent()"
exec admin "lua xml:xpath(\"//User/List/A[@id='abc']\"):parent():parent()"
exec admin "lua xml:xpath(\"//User/List/A[@id='abc']\"):parent():parent():parent()"
exec admin "lua xml:xpath(\"//User/List/A[@id='abc']\"):add_child(elm)"
exec admin "lua xml"
exec admin "lua xml:xpath(\"//User\"):add_child(elm:clone())"
exec admin "lua xml"
exec admin "lua elm:remove()"
exec admin "lua xml"
exec admin "lua elm:remove()"
exec admin "lua xml:remove()"
exec admin "lua xml:xpath('//User'):text('abc')"
exec admin "lua xml"
