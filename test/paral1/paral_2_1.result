space_2 = box.schema.create_space('tweedledum2')
---
...
space_2:create_index('primary', 'hash', {parts = {0, 'str'}, unique = true })
---
...
space_2:create_index('minmax', 'tree', {parts = {1, 'str', 2, 'str'}, unique = true })
---
...
space_2:insert('brave', 'new', 'world')
---
- ['brave', 'new', 'world']
...
space_2.index['minmax']:min()
---
- ['brave', 'new', 'world']
...
space_2.index['minmax']:max()
---
- ['brave', 'new', 'world']
...
space_2.index['minmax']:select('new', 'world')
---
- ['brave', 'new', 'world']
...
-- A test case for Bug #904208
-- "assert failed, when key cardinality is greater than index cardinality"
--  https://bugs.launchpad.net/tarantool/+bug/904208
space_2.index['minmax']:select('new', 'world', 'order')
---
- error: Invalid key part count (expected [0..2], got 3)
...
space_2:delete('brave')
---
- ['brave', 'new', 'world']
...
-- A test case for Bug #902091
-- "Positioned iteration over a multipart index doesn't work"
-- https://bugs.launchpad.net/tarantool/+bug/902091
space_2:insert('item 1', 'alabama', 'song')
---
- ['item 1', 'alabama', 'song']
...
space_2.index['minmax']:select('alabama')
---
- ['item 1', 'alabama', 'song']
...
space_2:insert('item 2', 'california', 'dreaming ')
---
- ['item 2', 'california', 'dreaming ']
...
space_2:insert('item 3', 'california', 'uber alles')
---
- ['item 3', 'california', 'uber alles']
...
space_2:insert('item 4', 'georgia', 'on my mind')
---
- ['item 4', 'georgia', 'on my mind']
...
iter_2, tuple_2 = space_2.index['minmax']:next('california')
---
...
tuple_2
---
- ['item 2', 'california', 'dreaming ']
...
_, tuple_2 = space_2.index['minmax']:next(iter_1)
---
...
tuple_2
---
- ['item 4', 'georgia', 'on my mind']
...
space_2:delete('item 1')
---
- ['item 1', 'alabama', 'song']
...
space_2:delete('item 2')
---
- ['item 2', 'california', 'dreaming ']
...
space_2:delete('item 3')
---
- ['item 3', 'california', 'uber alles']
...
space_2:delete('item 4')
---
- ['item 4', 'georgia', 'on my mind']
...
space_2:truncate()
---
...
--
-- Test that we print index number in error ER_INDEX_VIOLATION
--
space_2:insert('1', 'hello', 'world')
---
- ['1', 'hello', 'world']
...
space_2:insert('2', 'hello', 'world')
---
- error: Duplicate key exists in unique index 1
...
space_2:drop()
---
...
